var GNAdScript;!function(){"use strict";var e={d:function(t,i){for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===r(t)?t:String(t)}function s(e,t,i){return(t=a(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}e.r(t),e.d(t,{default:function(){return p}});var p=function(){function e(t,i,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adSelector=t,this.adClass=t.replace(".","");var r={gam_id:"43340684",custom_variables:"",baseUri:"",size_mappings:{"portable-leaderboard":[{viewport:[1260,300],ad_sizes:[[728,90],[970,250],[1260,110],[1260,250]]},{viewport:[980,300],ad_sizes:[[728,90],[970,250]]},{viewport:[750,300],ad_sizes:[728,90]},{viewport:[340,300],ad_sizes:[320,50]},{viewport:[0,0],ad_sizes:[]}],"portable-fishbowl":[{viewport:[980,300],ad_sizes:[[320,400],[728,90],[970,250]]},{viewport:[750,300],ad_sizes:[[320,400],[728,90]]},{viewport:[0,0],ad_sizes:[]}],"portable-mpu-leader":[{viewport:[980,300],ad_sizes:[[300,250],[728,90],[970,250]]},{viewport:[750,300],ad_sizes:[[300,250],[728,90]]},{viewport:[0,0],ad_sizes:[]}]},piiCheck:!1,lazyload_selector:".lazyload",lazyload_spacer:800,viewportMultiplierMobile:1,showNonPersonalisedAds:"false",device:"mobile",floorPrices:{},runUAM:!1,runPrebid:!1,permutiveTimeout:0,biddingTimeout:2e3,prebidTimeout:1500,pubUAM:"a06ac1f9-0844-4cf7-81fe-f8ce4a7d7943",prebidLib:"https://cdn.gamer-network.net/2020/ads/prebid3.9.0.js",prebidConfig:{},teadsIdOverride:"",adRenderedCallback:function(){},insertInto:"",insertTopMargin:0,stickySidebar:!1,stickyViewports:3,inlineInto:"",inlineBetweenTextOnly:!1,inlineAvoidBbwApester:!1,desktopInlineInto:".article_body_content",advertHeader:"Advertisement",firstMobileAd:"",fixMobileAdHeight:!1,dynamicAd:"AE_MPU_1",dynamicAdDesktop:"",stickyAd:"",initialized:!1,childPublisher:"",testingCohort:"",ownedSite:!0,runAutoSlotsEverywhere:!1,apesterToken:"",mobileInReadId:"",articleType:"",articlePublishedDate:"",primisPlaylistPlacementId:"",primisStyling:!1,videoPlaylist:!1,videoPlaylistArticles:!1,videoPlaylistTitle:"",videoPlaylistID:"",videoPlaylistGamesList:{},bbwPublication:"gamernetwork",bbwAutoplay:"",lazyloadSpacerMobile:800,apesterDesktop:"",apesterDesktopOnly:!1,runQuokkster:!1,articleAutoPoll:!0,articleVideoAutoInject:!0,inlineAdsConfig:{includeHeaderInCalc:!0,minAdvertSpacing:0,lastAdTollerance:1},countryCode:"",refreshAds:{enabled:!1,maxRefreshes:10,desktopRate:3e4,mobileRate:3e4,mobileStickyRate:3e4,teadsRate:3e4,refreshableAdvertIds:[220082044,78946204,72863404]},pubstackTagId:"",mobile_halfpage_position:0,debug:"true"===new URLSearchParams(document.location.search).get("ads-debug"),mobileInterstitial:"",desktopSticky:"",appendSidebarAds:!0,userExternalUuid:"",twitchEmbed:"PAXarena",stopTwitchEmbed:!1,testKueez:!1};if(void 0!==n&&n.length>1){var a=this.chooseCohort(n);Object.keys(a).forEach((function(e){i[e]=a[e]}));var s=document.createElement("meta");s.name="pbstck_context:pbstck_ab_test",s.content=a.testingCohort,document.getElementsByTagName("head")[0].appendChild(s)}var l=u(u({},r),i);Object.keys(r).forEach((function(e){o[e]=l[e]})),"mobile"===this.device&&(this.lazyload_spacer=this.lazyloadSpacerMobile),console.log("device",this.device),console.log("lazyload_spacer",this.lazyload_spacer);var d=this.floorPrices,c=d.defaultFloorprice,p=d.usFloorprice,g=d.ukFloorprice,h=d.aucaFloorprice,f=d.euFloorprice,m=c;switch(this.countryCode){case"US":m=p||0;break;case"GB":case"UK":m=g||0;break;case"AU":case"CA":m=h||0;break;case"DE":case"NL":case"SE":case"AT":case"FR":case"NO":case"CH":case"IE":case"FI":case"DK":case"BE":m=f||0;break;default:m=c||0}if(this.runPrebid&&m&&(this.floor_settings={currency:"GBP",modelVersion:"Geo Floors",schema:{fields:["mediaType","size"]},values:{"banner|*":m}}),this.testKueez){var v=document.createElement("script");v.type="text/javascript",v.dataset.cfasync="false",v.crossOrigin="anonymous",v.src="https://static.kueezrtb.com/latest.js",v.id="kueezrtb_latest",document.getElementsByTagName("head")[0].appendChild(v)}this.GAMFloor=m}var t,i;return t=e,i=[{key:"init",value:function(){this.loadGAM(),this.initialized=!0}},{key:"chooseCohort",value:function(e){for(var t,i=Math.random()*e.map((function(e){return e.split})).reduce((function(e,t){return e+t})),n=0,o=0;o<e.length&&!((n+=(t=e[o]).split)>i);o+=1);return t.config.testingCohort="".concat(t.name,"-").concat(t.split),t.config}},{key:"urlToArray",value:function(e){for(var t=new Map,i=e.substring(e.indexOf("?")+1).split("&"),n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");t.set(decodeURIComponent(o[0]),decodeURIComponent(o[1]))}return t}},{key:"isEmail",value:function(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}},{key:"inreadConditions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return!(""===this.mobileInReadId||e!==t)}},{key:"videoPlaylistConditions",value:function(){var e=!0===this.videoPlaylist||""!==this.primisPlaylistPlacementId,t="news"===this.articleType&&!this.runAutoSlotsEverywhere,i=!1;return this.articlePublishedDate&&(i=new Date(this.articlePublishedDate).getFullYear()<2021),!(this.custom_variables.tags&&this.custom_variables.tags.some((function(e){return"digital-foundry"===e}))||document.querySelectorAll("script[data-cookies-src*=bbvms], script[src*=bbvms\\.com], script[src*=live\\.primis\\.tech], script[data-cookies-src*=live\\.primis\\.tech]").length||!e||!this.articleVideoAutoInject||t||!i&&this.videoPlaylistArticles&&!window.BrockmanAds.runAutoSlotsEverywhere||!this.isBrandSafe()||!this.bbwPublication&&!this.primisPlaylistPlacementId||!this.bbwAutoplay&&!this.primisPlaylistPlacementId)}},{key:"twitchConditions",value:function(){if(this.stopTwitchEmbed)return!1;if(!this.twitchEmbed)return!1;if(!["https://www.eurogamer.net","https://www.rockpapershotgun.com","https://www.vg247.com"].includes(this.baseUri))return!1;var e=Date.now();return[{start:Date.UTC(2023,7,19,22,0,0),end:Date.UTC(2023,7,20,2,0,0)},{start:Date.UTC(2023,7,26,22,0,0),end:Date.UTC(2023,7,27,2,0,0)},{start:Date.UTC(2023,8,2,17,0,0),end:Date.UTC(2023,8,3,1,0,0)},{start:Date.UTC(2023,8,3,21,0,0),end:Date.UTC(2023,8,4,1,0,0)}].some((function(t){return e>=t.start&&e<=t.end}))}},{key:"surveyConditions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".apester-media",i=""===this.apesterToken,n="news"===this.articleType,o=this.apesterDesktopOnly,r=!1,a=document.querySelectorAll(t).length,s=document.querySelector('.poll_wrapper[data-fixed="true"]');if(s){r=!0;var l=s.querySelector(".question");l&&this.sendToPiwik("quokkster: ".concat(l.innerText),"loaded")}return a&&(this.testingCohort.includes("testApester")||this.testingCohort.includes("testQuokkster"))&&this.sendToPiwik("apester","loaded"),a||r?(this.debug&&console.log("%cPOLL ALREADY ON PAGE","background: black; color: red; padding: 4px 8px"),!1):n||!e&&o||!this.isBrandSafe()||!this.articleAutoPoll?(this.debug&&console.log("%cNO POLL INJECTION FOR THIS ARTICLE","background: black; color: red; padding: 4px 8px"),!1):i&&!this.runQuokkster?(this.debug&&console.log("%cNO POLL SETTINGS","background: black; color: red; padding: 4px 8px"),!1):(this.debug&&console.log("%cPOLL CONDITIONS MET","background: black; color: green; padding: 4px 8px"),!0)}},{key:"loadGAM",value:function(){if(this.pubstackTagId){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://boot.pbstck.com/v1/tag/".concat(this.pubstackTagId),document.getElementsByTagName("head")[0].appendChild(e)}this.loadTeads(),window.googletag=window.googletag||{cmd:[]};var t=document.createElement("script");t.async=!0,t.type="text/javascript";var i="https:"===document.location.protocol;t.src="".concat(i?"https:":"http:","//securepubads.g.doubleclick.net/tag/js/gpt.js");var o=document.getElementsByTagName("script")[0];if(o.parentNode.insertBefore(t,o),this.runUAM){!function(e,t,i,n,o,r,a){function s(i,n){t[e]._Q.push([i,n])}t[e]||(t[e]={init:function(){s("i",arguments)},fetchBids:function(){s("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(r=i.createElement(n)).async=!0,r.src="//c.amazon-adsystem.com/aax2/apstag.js",(a=i.getElementsByTagName(n)[0]).parentNode.insertBefore(r,a))}("apstag",window,document,"script");var r=this.ownedSite?[]:[{asi:"reedpop.com",sid:"22392450815",hp:1}];apstag.init({pubID:this.pubUAM,adServer:"googletag",simplerGPT:!1,schain:{complete:1,ver:"1.0",nodes:r}})}if(this.runPrebid){var a=document.createElement("script");a.async=!0,a.type="text/javascript",a.src=this.prebidLib,o.parentNode.insertBefore(a,o)}this.urlArray=this.urlToArray(window.location.search);var s,l,c,u=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return d(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw r}}}}(this.urlArray.entries());try{for(u.s();!(s=u.n()).done;){var p=(l=s.value,c=2,function(e){if(Array.isArray(e))return e}(l)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,a,s=[],l=!0,d=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){d=!0,o=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(l,c)||n(l,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=(p[0],p[1]);this.isEmail(g)&&(this.piiCheck=!0)}}catch(e){u.e(e)}finally{u.f()}if(!this.piiCheck){"desktop"===this.device||"hd"===this.device?(this.insertInto&&document.querySelectorAll(this.insertInto).length>0&&(this.insertCounter=0,this.removeOverflowingSidebarAds(),this.insertAds()),this.desktopSticky&&this.appendStickyAd(this.desktopSticky,"728x90,970x90,980x90"),this.inlineComUnitDesktop()):(this.inlineInto&&document.querySelectorAll(this.inlineInto).length>0&&(this.inlineCounter=0,this.inlineAds()),this.stickyAd&&this.appendStickyAd(this.stickyAd,"325x100,320x100,320x50,325x50"));var h=document.querySelectorAll(this.adSelector);this.createAds(h),this.lazyloadAds(),this.videoPlaylistConditions()&&this.twitchConditions()&&this.stickyTwitch()}}},{key:"loadTeads",value:function(){window.teads_analytics=window.teads_analytics||{},window.teads_analytics.analytics_tag_id=this.teadsIdOverride||"PUB_21458",window.teads_analytics.share=window.teads_analytics.share||function(){(window.teads_analytics.shared_data=window.teads_analytics.shared_data||[]).push(arguments)};var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://a.teads.tv/analytics/tag.js",document.getElementsByTagName("head")[0].appendChild(e)}},{key:"stickyTwitch",value:function(){var e=this,t=document.getElementById("commercial_twitch_embed").parentElement,i=document.querySelector(".bbvms_sticky_wrapper"),n=document.getElementById("commercial_twitch_embed").parentElement.parentElement,o="#0084CC";"https://www.rockpapershotgun.com"===this.baseUri&&(o="#44208d"),"https://www.vg247.com"===this.baseUri&&(o="#e31c2d");var r=document.createElement("button");r.style.position="absolute",r.style.top="0px",r.style.right="0px",r.style.margin="4px",r.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24">\n        <path stroke="#FFFFFF" stroke-width="2" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0Z"/>\n        <path stroke="#FFFFFF" stroke-linecap="round" stroke-width="2" d="m9 9 6 6m0-6-6 6"/>\n      </svg>\n    ';var a=document.createElement("div");a.style.color="white",a.style.fontSize="14px",a.innerText="Watch ".concat(this.twitchEmbed," live on Twitch"),a.classList.add("bbvms_sticky_wrapper_text"),"mobile"===this.device?(a.style.marginLeft="222px",a.style.fontSize="16px",a.style.padding="10px"):a.style.marginBottom="6px";var s=document.createElement("div");s.style.height="125px",s.style.width="100vw",s.style.backgroundColor=o,s.style.position="fixed",s.style.top="0px",s.style.left="0px",s.style.display="flex",s.style.alignItems="center",s.append(a),s.append(r);var l=function(){t.style.position="relative",t.style.top="auto",t.style.left="auto",t.style.height="0px",t.style.width="100%",t.style.paddingBottom="56.25%","mobile"!==e.device?(i.style.position="relative",i.style.top="auto",i.style.display="none"):(s.style.display="none",t.querySelector("iframe").style.transform="unset")},d=!1;r.addEventListener("click",(function(){d=!0,l()})),"IntersectionObserver"in window&&new IntersectionObserver((function(n){n.forEach((function(n){n.isIntersecting||n.boundingClientRect.top>0?l():d||(t.style.position="fixed",t.style.zIndex="4999",t.style.paddingBottom="0","mobile"===e.device?(t.style.top="0",t.style.left="0",t.style.height="250px",t.style.width="444px",t.querySelector("iframe").style.transformOrigin="0 0",t.querySelector("iframe").style.transform="scale(0.5)",s.style.display="flex",t.prepend(s)):(i.style.display="block",i.style.position="fixed",i.style.minHeight="180px",i.style.backgroundColor=o,i.style.top="20px",i.style.zIndex="4998",i.prepend(a),i.append(r),t.style.top="47px",t.style.left="".concat(document.querySelector(".sidebar").getBoundingClientRect().left+6,"px"),t.style.width="288px",t.style.height="162px",window.addEventListener("resize",(function(){t.style.left="".concat(document.querySelector(".sidebar").getBoundingClientRect().left+6,"px")}))))}))}),{threshold:0}).observe(n)}},{key:"createAds",value:function(e){var t=this,i=[],n=[],r=[];if(e.forEach((function(e){if(!e.hidden){var o=t.gam_id;t.childPublisher&&(o+=",".concat(t.childPublisher));var a,s=e.dataset.dfpId,l=e.id;a="fluid"==e.dataset.dfpSizes?"fluid":t.getDimensions(e);var d,c=e.dataset.dfpTargeting,u=e.dataset.dfpOutofpage,p=e.dataset.dfpCollapse,g=e.dataset.dfpResponsive,h=(e.dataset.dfpRefresh,t.size_mappings);if(i.push(l),t.prebidConfig[t.device]&&t.prebidConfig[t.device][s]){var f=t.prebidConfig[t.device][s];f.code=l,f.floors=t.floor_settings,f.pubstack.tags=["floor: ".concat(t.GAMFloor)],r.push(f)}googletag.cmd.push((function(){if(n[l]=u?googletag.defineOutOfPageSlot("/".concat(o,"/").concat(s),l).addService(googletag.pubads()):googletag.defineSlot("/".concat(o,"/").concat(s),a,l).addService(googletag.pubads()),t.mobileInterstitial&&"mobile"===t.device&&(d=googletag.defineOutOfPageSlot("/".concat(o,"/").concat(t.mobileInterstitial),googletag.enums.OutOfPageFormat.INTERSTITIAL)),d&&d.addService(googletag.pubads()),c&&c.split(",").forEach((function(e){var t=e.split("=");n[l].setTargeting(t[0],t[1])})),"true"==p&&n[l].setCollapseEmptyDiv(!0),g&&h[g]){var i=googletag.sizeMapping();h[g].forEach((function(e){i.addSize(e.viewport,e.ad_sizes)})),n[l].defineSizeMapping(i.build())}document.getElementById(l).hidden||googletag.pubads().addEventListener("slotRenderEnded",(function i(o){o.slot===n[l]&&(t.refreshAd(e,r,n[l],o.advertiserId),googletag.pubads().removeEventListener("slotRenderEnded",i))}))}))}})),this.checkNonPersonalisedAds(),this.custom_variables&&Array.from(Object.entries(this.custom_variables)).forEach((function(e){googletag.cmd.push((function(){googletag.pubads().setTargeting(e[0],e[1])}))})),this.custom_variables.url||googletag.cmd.push((function(){googletag.pubads().setTargeting("url",window.location.pathname.substring(0,40))})),this.testingCohort&&googletag.cmd.push((function(){googletag.pubads().setTargeting("testingCohort",t.testingCohort),googletag.pubads().setTargeting("pbstck_ab_test",t.testingCohort)})),this.GAMFloor&&googletag.cmd.push((function(){googletag.pubads().setTargeting("floor",t.GAMFloor.toString())})),this.inlineInto&&document.querySelectorAll(this.inlineInto).length>0){if(!this.custom_variables.ads_count){var a=String(document.querySelectorAll(".inlinead").length);googletag.cmd.push((function(){googletag.pubads().setTargeting("ads_count",a)}))}if(!this.custom_variables.article_words){function f(e){for(var t="",i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];8!==n.nodeType&&(t+=1!==n.nodeType?n.nodeValue:f(n))}return t}var s=document.querySelector("".concat(this.inlineInto));if(s){var l=f(s);l=l.split(" ").filter((function(e){return""!==e&&"\n"!==e&&"\n\n"!==e}));var d=String(10*Math.round(l.length/10));googletag.cmd.push((function(){googletag.pubads().setTargeting("article_words",d)}))}}if(!this.custom_variables.article_images){var c=String(document.querySelectorAll("".concat(this.inlineInto," img")).length);googletag.cmd.push((function(){googletag.pubads().setTargeting("article_images",c)}))}if(!this.custom_variables.article_videos){var u=[];u.push.apply(u,o(Array.from(document.querySelectorAll(".article .video_wrapper > iframe, .article .video_wrapper > video"))));var p=String(o(new Set(u)).length);googletag.cmd.push((function(){googletag.pubads().setTargeting("article_videos",p)}))}if(!this.custom_variables.article_embeds){var g=String(document.querySelectorAll(".article iframe").length);googletag.cmd.push((function(){googletag.pubads().setTargeting("article_embeds",g)}))}}var h=this.adRenderedCallback;googletag.cmd.push((function(){googletag.pubads().enableSingleRequest(),googletag.pubads().addEventListener("slotRenderEnded",(function(e){var i=e.slot.getSlotElementId();"function"==typeof h&&(h.call(t,i,e),(t.stickyAd&&i.includes(t.stickyAd)||t.desktopSticky&&i.includes(t.desktopSticky))&&e.isEmpty&&document.getElementById("sticky_leaderboard").remove())})),(t.runUAM||t.runPrebid||window.permutive&&window.permutive.readyWithTimeout)&&googletag.pubads().disableInitialLoad(),t.userExternalUuid&&googletag.pubads().setPublisherProvidedId(t.userExternalUuid),googletag.enableServices()})),e.length>0&&(this.runUAM||this.runPrebid?window.permutive&&window.permutive.readyWithTimeout&&this.permutiveTimeout?window.permutive.readyWithTimeout((function(){t.headerBidding(r)}),"realtime",this.permutiveTimeout):this.headerBidding(r):window.permutive&&window.permutive.readyWithTimeout&&this.permutiveTimeout?window.permutive.readyWithTimeout((function(){googletag.cmd.push((function(){googletag.pubads().refresh()})),t.displayAds(i)}),"realtime",this.permutiveTimeout):(googletag.cmd.push((function(){googletag.pubads().refresh()})),this.displayAds(i)))}},{key:"headerBidding",value:function(e,t){var i=this,n=!1,o={adserverRequestSent:!1,aps:!1,prebid:!1};if(this.runUAM&&this.runPrebid&&(n=!0),this.runUAM){var r=[];e.forEach((function(e){var t=e.code,i=e.pubstack&&e.pubstack.adUnitPath,n=e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes;t&&i&&n&&r.push({slotID:t,slotName:i,sizes:n})})),r.length&&googletag.cmd.push((function(){apstag.fetchBids({slots:r},(function(e){apstag.setDisplayBids(),o.aps=!0,l()}))}))}if(this.runPrebid){var a={buckets:[{precision:2,max:3,increment:.01},{max:9,increment:.02},{max:20,increment:.05},{max:30,increment:.1},{max:99,increment:.5}]},s={gdpr:{cmpApi:"iab",timeout:8e3,defaultGdprScope:!0,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:["permutive"]},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[]}]}};window.pbjs=window.pbjs||{},pbjs.que=pbjs.que||[],pbjs.que.push((function(){pbjs.bidderSettings={amx:{storageAllowed:!0},criteo:{storageAllowed:!0},teads:{storageAllowed:!0},triplelift:{storageAllowed:!0},onetag:{storageAllowed:!0},ix:{storageAllowed:!0}},pbjs.setConfig({useBidCache:!0,priceGranularity:a,currency:{adServerCurrency:"GBP",granularityMultiplier:1,defaultRates:{GBP:{USD:1.38,EUR:1.17}}},floors:{},realTimeData:{auctionDelay:50,dataProviders:[{name:"permutive",waitForIt:!0,params:{acBidders:["appnexus","pubmatic","openx"]}}]},userSync:{userIds:[{name:"pubCommonId",storage:{type:"cookie",name:'"_pubcid"',expires:365}},{name:"id5Id",params:{partner:978},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}}],auctionDelay:50,filterSettings:{iframe:{bidders:"*",filter:"include"}}}}),"function"==typeof __tcfapi&&pbjs.setConfig({consentManagement:s}),pbjs.requestBids({adUnits:e,bidsBackHandler:function(){googletag.cmd.push((function(){pbjs.setTargetingForGPTAsync(),o.prebid=!0,l()}))},timeout:i.prebidTimeout})}))}function l(){!0===n?o.aps&&o.prebid&&d():d()}function d(){!0!==o.adserverRequestSent&&(o.adserverRequestSent=!0,googletag.cmd.push((function(){t?googletag.pubads().refresh([t]):googletag.pubads().refresh()})))}window.setTimeout((function(){d()}),this.biddingTimeout)}},{key:"displayAds",value:function(e){e.forEach((function(e){googletag.cmd.push((function(){googletag.display(e)}))}))}},{key:"getDimensions",value:function(e){var t=[],i=e.dataset.dfpSizes;return i?i.split(",").forEach((function(e){var i=e.split("x");t.push([parseInt(i[0],10),parseInt(i[1],10)])})):t.push([e.width,e.height]),t}},{key:"checkNonPersonalisedAds",value:function(){"true"===this.showNonPersonalisedAds?googletag.cmd.push((function(){googletag.pubads().setRequestNonPersonalizedAds(1),googletag.pubads().setTargeting("npa","true")})):googletag.cmd.push((function(){googletag.pubads().setRequestNonPersonalizedAds(0),googletag.pubads().setTargeting("npa","false")}))}},{key:"lazyloadAds",value:function(){var e=this,t=document.querySelectorAll(this.lazyload_selector),i={rootMargin:"0px 0px ".concat(this.lazyload_spacer,"px 0px"),threshold:0};if(console.log("config",i),"IntersectionObserver"in window){var n=new IntersectionObserver((function(t){t.forEach((function(t){if(t.intersectionRatio>0){n.unobserve(t.target);var i=t.target;e.requestAd(i),i.classList.remove("lazyload"),i.classList.add("lazyloaded")}}))}),i);t.forEach((function(e){n.observe(e)}))}}},{key:"isInViewport",value:function(e,t){var i=e.getBoundingClientRect(),n=i.top+window.pageYOffset,o=i.bottom+window.pageYOffset,r=window.pageYOffset,a=r+window.innerHeight+t;return o>r&&n<a}},{key:"refreshAd",value:function(e,t,i,n){var o=this,r=!1;if(this.refreshAds.enabled)if(!Number.isInteger(n)||this.refreshAds.refreshableAdvertIds.includes(n)){var a,s=this.refreshAds.desktopRate;"mobile"===this.device&&(s=this.refreshAds.mobileRate,e.classList.contains("sticky_lb")&&(s=this.refreshAds.mobileStickyRate));var l=0,d=function t(i){if(o.debug&&console.log("%cBID WON: ","background: black; color: green; padding: 4px 8px",i),i.adUnitCode===e.id&&"teads"===i.bidderCode&&l<o.refreshAds.maxRefreshes){var n=o.refreshAds.teadsRate-s;o.debug&&console.log("is teads pause for ".concat(n," seconds")),clearInterval(a),o.runPrebid&&(pbjs.offEvent("bidWon",t,e.id),setTimeout(c,n))}},c=function(){r||(o.debug&&console.log("%cREFRESH ENABLED ID: ".concat(n),"background: black; color: green; padding: 4px 8px",e),o.runPrebid&&pbjs.onEvent("bidWon",d,e.id),a=setInterval(u,s))},u=function(){if("hidden"===document.visibilityState||document.fullscreenElement||document.webkitFullscreenElement){o.debug&&console.log("%cREFRESH DISABLED - Document visibility: ".concat(document.visibilityState,", Fullscreen el: ").concat(document.fullscreenElement.nodeName||document.webkitFullscreenElement.nodeName),"background: black; color: red; padding: 4px 8px",e),clearInterval(a);var s=function t(){"visible"===document.visibilityState&&!document.fullscreenElement&&!document.webkitFullscreenElement&&l<o.refreshAds.maxRefreshes&&(c(),o.debug&&console.log("%cREFRESH ENABLED - Document visibility ".concat(document.visibilityState,", Fullscreen el: ").concat(document.fullscreenElement||document.webkitFullscreenElement),"background: black; color: green; padding: 4px 8px",e),document.removeEventListener("visibilitychange",t))};document.addEventListener("visibilitychange",s),["fullscreenchange","webkitfullscreenchange"].forEach((function(e){document.addEventListener(e,s)}))}else{if(l+=1,o.runUAM||o.runPrebid){var u=t.find((function(t){return t.code===e.id}));o.headerBidding([u],i)}else googletag.pubads().refresh([i]);i.setTargeting("ad_refresh","true"),i.setTargeting("ad_refresh_rate",l),o.debug&&console.log("%cREFRESHED: ".concat(l,"x"),"background: black; color: green; padding: 4px 8px",e),l>=o.refreshAds.maxRefreshes&&(o.debug&&console.log("%cREFRESH DISABLED - Refresh count of ".concat(l," reached"),"background: black; color: red; padding: 4px 8px",e),clearInterval(a),o.runPrebid&&pbjs.offEvent("bidWon",d,e.id)),googletag.pubads().addEventListener("slotRenderEnded",(function t(i){n=i.advertiserId,o.debug&&console.log("ADVERTISER ID: ".concat(n)),i.slot.getSlotElementId()===e.id&&Number.isInteger(n)&&!o.refreshAds.refreshableAdvertIds.includes(n)&&(o.debug&&console.log("%cNOT REFRESHABLE ID: ".concat(n," FURTHER REFRESHING IN THIS SLOT BLOCKED"),"background: black; color: red; padding: 4px 8px",e),r=!0,clearInterval(a)),googletag.pubads().removeEventListener("slotRenderEnded",t)}))}};new IntersectionObserver((function(t){t.forEach((function(t){t.intersectionRatio<.5||l>=o.refreshAds.maxRefreshes||"hidden"===document.visibilityState||new URLSearchParams(window.location.search).has("google_preview")?(o.debug&&console.log("%cREFRESH DISABLED","background: black; color: red; padding: 4px 8px",e),clearInterval(a),o.runPrebid&&pbjs.offEvent("bidWon",d,e.id)):c()}))}),{threshold:.5}).observe(e)}else this.debug&&console.log("%cNOT REFRESHABLE ID: ".concat(n),"background: black; color: red; padding: 4px 8px",e)}},{key:"requestAd",value:function(e,t){var i=this,n="";if(e.dataset.dfpSizes){n=this.getDimensions(e);var o="";e.dataset.dfpTargeting&&(o=e.dataset.dfpTargeting.split(","));var r="";e.dataset.dfpCollapse&&(r="true"===e.dataset.dfpCollapse);var a=[];if(this.prebidConfig[this.device]&&this.prebidConfig[this.device][e.dataset.dfpId]){var s=this.prebidConfig[this.device][e.dataset.dfpId];s.code=e.id,s.floors=this.floor_settings,a.push(s)}googletag.cmd.push((function(){var s=i.gam_id;i.childPublisher&&(s+=",".concat(i.childPublisher));var l=googletag.defineSlot("/".concat(s,"/").concat(e.dataset.dfpId),n,e.id).addService(googletag.pubads());if(o)for(var d=0;d<o.length;d++){var c=o[d].split("="),u=c[0],p=c[1];l.setTargeting(u,p)}r&&l.setCollapseEmptyDiv(!0),i.runUAM||i.runPrebid?window.permutive&&window.permutive.readyWithTimeout&&i.permutiveTimeout?window.permutive.readyWithTimeout((function(){i.headerBidding(a,l)}),"realtime",i.permutiveTimeout):i.headerBidding(a,l):window.permutive&&window.permutive.readyWithTimeout&&i.permutiveTimeout?window.permutive.readyWithTimeout((function(){googletag.pubads().refresh([l])}),"realtime",i.permutiveTimeout):googletag.pubads().refresh([l]),googletag.pubads().addEventListener("slotRenderEnded",(function t(n){n.slot===l&&(i.refreshAd(e,a,l,n.advertiserId),googletag.pubads().removeEventListener("slotRenderEnded",t))})),t&&googletag.pubads().addEventListener("slotRenderEnded",(function(e){if(t==e.slot.getSlotElementId()){var n=i.checkEmptySpace(i.insertInto);n&&i.appendAd(n)}}))}))}}},{key:"generateAd",value:function(e){var t="hd"===this.device&&this.dynamicAdDesktop?this.dynamicAdDesktop:this.dynamicAd;return'\n      <div class="insert_ad_column">\n        <span class="advert_label">'.concat(this.advertHeader,'</span>\n        <div\n          class="autoad_lazyload"\n          data-dfp-id="').concat(t,'"\n          data-dfp-sizes="300x250, 300x600"\n          data-dfp-collapse="true"\n          data-dfp-targeting="lazyload=true,position=sidebar_').concat(e,'"\n          id="div-ga-autoad_').concat(t,"_").concat(e,'"\n        ></div>\n      </div>\n    ')}},{key:"generateInlineAd",value:function(e){var t="inlinead_lazyload",i="true",n="300x250",o="hd"===this.device&&this.dynamicAdDesktop?this.dynamicAdDesktop:this.dynamicAd;return this.firstMobileAd&&1===e&&(t="".concat(this.adClass," mpu"),i="false",n="300x250, 320x400",o=this.firstMobileAd),this.fixMobileAdHeight&&(t="".concat(t," mobile_fixed_height")),e==this.mobile_halfpage_position&&(t="".concat(t," mobile_halfpage"),n+=", 300x600"),'\n<span class="advert_label">'.concat(this.advertHeader,'</span>\n<div\n  class="').concat(t,'"\n  style="').concat("",'"\n  data-dfp-id="').concat(o,'"\n  data-dfp-sizes="').concat(n,'"\n  data-dfp-collapse="false"\n  data-dfp-targeting="lazyload=').concat(i,",position=inline_").concat(e,'"\n  id="div-ga-autoad_').concat(t,"_").concat(e,'"\n></div>\n    ')}},{key:"isBrandSafe",value:function(){return!this.custom_variables.brand_safety&&!this.custom_variables.ad_policies}},{key:"generatePlaylist",value:function(){var e=this,t=this.videoPlaylistID;this.videoPlaylistGamesList&&this.custom_variables.games&&this.custom_variables.games.forEach((function(i){Array.from(Object.entries(e.videoPlaylistGamesList)).forEach((function(e){e[0]==i&&(t=e[1])}))}));var i=document.createElement("figure");i.classList="bbw_playlist video",i.style.backgroundColor="#f1f5f7",i.style.padding="1px 16px 1px";var n=document.createElement("p");n.className="section_title",n.textContent=this.videoPlaylistTitle,i.appendChild(n);var o=document.createElement("div");o.classList="video-container";var r=document.createElement("script");return r.async=!0,r.type="text/javascript",r.src="https://".concat(this.bbwPublication,".bbvms.com/p/").concat(this.bbwAutoplay,"/l/").concat(t,".js"),o.appendChild(r),i.appendChild(o),i}},{key:"sendToPiwik",value:function(e,t){window._paq=window._paq||[],window._paq.push(["trackEvent","poll",e,t])}},{key:"addPrimisKeyValues",value:function(e){var t=e||{},i=t.games,n=t.tags,o="";return i&&(o+="&kv_2=".concat(i.join(","))),n&&(o+="&kv_1=".concat(n.join(","))),o}},{key:"generatePrimisPlaylist",value:function(){var e=Math.round((new Date).getTime()/1e3),t=this.baseUri,i=this.primisPlaylistPlacementId,n=this.addPrimisKeyValues(this.custom_variables),o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("language","javascript"),!this.ownedSite&&this.childPublisher?o.src="https://live.primis.tech/live/liveView.php?s=".concat(i,"&playerApiId=primis_playlist_commercial_slot&pubUrl=").concat(t,"&schain=1.0,1!reedpop.com,").concat(this.childPublisher,",1&cbuster=").concat(e).concat(n):o.src="https://live.primis.tech/live/liveView.php?s=".concat(i,"&playerApiId=primis_playlist_commercial_slot&pubUrl=").concat(t,"&cbuster=").concat(e).concat(n);var r=document.createElement("div");r.classList="primis_wrapper",r.appendChild(o);var a=document.createElement("figure");if(a.classList="primis_playlist_wrapper",a.style.clear="both",this.primisStyling){a.style.backgroundColor="#f1f5f7",a.style.padding="1px 16px 16px 16px";var s=document.createElement("p");s.className="section_title",s.textContent=this.videoPlaylistTitle,a.appendChild(s)}return a.appendChild(r),a}},{key:"generateTwitchEmbed",value:function(){var e=window.location.hostname,t=this.twitchEmbed,i=document.createElement("iframe");i.src="https://player.twitch.tv/?channel=".concat(t,"&parent=").concat(e,"&muted=true&autoplay=true&controls=false"),i.id="commercial_twitch_embed",i.style.left="0",i.style.top="0",i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.border="0",i.style.margin="0";var n=document.createElement("div");return n.classList="primis_wrapper",n.appendChild(i),n.style.left="0",n.style.width="100%",n.style.height="0",n.style.position="relative",n.style.paddingBottom="56.25%",window._paq=window._paq||[],window._paq.push(["trackEvent","Video","Twitch embed - ".concat(t," - Loaded")]),n}},{key:"generateSurvey",value:function(e){var t=document.querySelector('.poll_wrapper[data-placeholder="true"]');if(this.runQuokkster&&this.articleAutoPoll){if(t){e.append(t),t.dataset.placed=!0;var i=t.querySelector(".question");i&&this.sendToPiwik("quokkster: ".concat(i.innerText),"loaded"),this.debug&&console.log("%cADDING QUOKKSTER POLL","background: black; color: green; padding: 4px 8px")}}else t&&(t.style.display="none"),(this.testingCohort.includes("testApester")||this.testingCohort.includes("testQuokkster"))&&this.sendToPiwik("apester","loaded"),e.innerHTML=this.generateApester(),this.debug&&console.log("%cADDING APESTER POLL","background: black; color: green; padding: 4px 8px")}},{key:"generateApester",value:function(){var e=this,t='\n      <div class="inlinead_lazyload apester_block">\n        <div\n          class="apester-media"\n          data-token="'.concat(this.apesterToken,'"\n          data-context="true"\n          data-tags=""\n          data-fallback="true"\n          height="').concat("mobile"===this.device?810:890,'"\n        ></div>\n      </div>\n    ');return window.addEventListener("message",(function(t){if("picked_answer"===t.data.type){var i=t.data;permutive.track("ApesterSurveyResponse",{answer:{id:i.data.answerId,text:i.data.answerText},interaction:{id:i.data.interactionId},slide:{id:i.data.slideId,title:i.data.slideTitle}}),e.sendToPiwik(i.data.slideTitle,"".concat(i.data.slideTitle,": ").concat(i.data.answerText))}})),t}},{key:"generateInread",value:function(){return'\n      <span class="advert_label">'.concat(this.advertHeader,'</span>\n      <div class="inreadvideo"></div>\n    ')}},{key:"addBBWScript",value:function(e){var t=document.createElement("script");t.type="text/javascript",t.src="https://gamernetwork.mainroll.com/a/".concat(this.mobileInReadId,".js"),e.appendChild(t)}},{key:"removeOverflowingSidebarAds",value:function(){var e=this;new ResizeObserver((function(t){t.forEach((function(t){o(document.querySelectorAll(".gn_sidebar > .autoad.collapsible")).reduce((function(e,i){var n=e+i.offsetHeight;if(n>t.contentRect.height){var o=googletag.pubads().getSlots().filter((function(e){return e.getSlotElementId()===i.querySelector(".autoad_lazyloaded, .autoad_lazyload").id}));googletag.destroySlots(o),i.remove()}return n}),0);var i=e.checkEmptySpace(e.insertInto);i&&e.appendAd(i)}))})).observe(document.querySelector(".gn_sidebar"))}},{key:"appendAd",value:function(e){if(this.insertCounter++,this.appendSidebarAds||!(this.insertCounter>1)){var t,i=document.querySelector(this.insertInto),n=document.createElement("div");n.classList.add("autoad","collapsible"),1==this.insertCounter&&(n.style.marginTop=this.insertTopMargin),t=this.stickySidebar&&e>=window.innerHeight*this.stickyViewports?window.innerHeight*this.stickyViewports:Math.min(e,window.innerHeight+600),this.appendSidebarAds?n.style.height="".concat(t,"px"):(document.querySelector(this.insertInto).style.display="flex",document.querySelector(this.insertInto).style.flexDirection="column",n.style.height="100%");var o=!1;if((t<window.innerHeight+600||!this.appendSidebarAds)&&(o=!0),n.innerHTML=this.generateAd(this.insertCounter),this.stickySidebar&&t>=window.innerHeight+600){var r=n.querySelector(".insert_ad_column");if(r.style.position="sticky",r.style.top="260px",r.style.paddingTop="10px",1===this.insertCounter){var a=document.createElement("div");a.classList.add("bbvms_sticky_wrapper"),a.style.cssText="\n          padding: 6px;\n          width: 300px;\n          background: white;\n          border-radius: 3px;\n          min-height: 200px;\n        ",a.insertAdjacentHTML("afterbegin",'<div style="width: 288px; height: 162px;" id="bbvms_sticky_video"></div>'),i.appendChild(a)}o||(r.style.paddingBottom="300px")}i.appendChild(n),this.observer_autoads.observe(n.querySelector(".autoad_lazyload"))}}},{key:"checkEmptySpace",value:function(e){for(var t=document.querySelector(e),i=window.getComputedStyle(t),n=parseFloat(i.height)-parseFloat(i.marginTop),o=0;o<t.children.length;o++){var r=t.children[o].currentStyle||window.getComputedStyle(t.children[o]),a=parseFloat(r.marginTop)+parseFloat(r.marginBottom);n=n-t.children[o].offsetHeight-a}return n>700&&n}},{key:"insertAds",value:function(){var e=this,t={rootMargin:"0px 0px ".concat(this.lazyload_spacer,"px 0px"),threshold:0};console.log("config",t),"IntersectionObserver"in window&&(this.observer_autoads=new IntersectionObserver((function(t){t.forEach((function(t){if(t.intersectionRatio>0){e.observer_autoads.unobserve(t.target);var i=t.target;e.requestAd(i,t.target.id),i.classList.remove("autoad_lazyload"),i.classList.add("autoad_lazyloaded")}}))}),t));var i=this.checkEmptySpace(this.insertInto);i&&this.appendAd(i)}},{key:"insertAfter",value:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)}},{key:"elemDims",value:function(e){return{top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight,height:e.offsetHeight,element:e}}},{key:"inlineAds",value:function(){var e=this;this.inlineCounter+=1;var t=window.innerHeight*this.viewportMultiplierMobile,i=this.inlineAdsConfig.includeHeaderInCalc?document.querySelector(this.inlineInto).getBoundingClientRect().top+document.documentElement.scrollTop:0,n=this.inlineAdsConfig.minAdvertSpacing>0?this.inlineAdsConfig.minAdvertSpacing:t,r=(this.inlineAdsConfig?this.inlineAdsConfig:1).lastAdTollerance,a=0;if("IntersectionObserver"in window){var s={rootMargin:"0px 0px ".concat(this.lazyload_spacer,"px 0px"),threshold:0};console.log("inline ads config",s),this.observer_inlineads=new IntersectionObserver((function(t){t.forEach((function(t){if(t.intersectionRatio>0){e.observer_inlineads.unobserve(t.target);var i=t.target;e.requestAd(i),i.classList.remove("inlinead_lazyload"),i.classList.add("inlinead_lazyloaded"),console.log("loaded",i)}}))}),s)}var l=this.videoPlaylistConditions(),d=this.twitchConditions(),c=this.surveyConditions(!1),u=function(t){var i=document.createElement("div");if(i.classList.add("inlinead"),1===t)i.innerHTML=e.generateInlineAd(t);else if(i.classList.add("collapsible"),e.inreadConditions(t))i.innerHTML=e.generateInread(),e.addBBWScript(i.querySelector(".inreadvideo"));else if(2===t){if(!l)return e.inlineCounter+=1,null;d?i.appendChild(e.generateTwitchEmbed()):i.appendChild(e.primisPlaylistPlacementId?e.generatePrimisPlaylist():e.generatePlaylist())}else 3===t?c?e.generateSurvey(i):i.innerHTML=e.generateInlineAd(t):t>3&&(i.innerHTML=e.generateInlineAd(t));return i.querySelector(".inlinead_lazyload")&&e.observer_inlineads.observe(i.querySelector(".inlinead_lazyload")),a=0,e.inlineCounter+=1,i};(e.inlineBetweenTextOnly?document.querySelectorAll("".concat(e.inlineInto," > *, ").concat(e.inlineInto," section > *")):document.querySelectorAll("".concat(e.inlineInto," > section:not(.summary)")).length>0?document.querySelectorAll("".concat(e.inlineInto," > *:not(section):not(.review_rating):not(h1):not(h2):not(h3):not(h4):not(h5):not(h6):not(script):not(.groups):not(.supporter-article-promo):not(.df-promo):not(aside):not(.internal-link):not(.poll_wrapper):not(.poll_ad_container), ").concat(e.inlineInto," section:not(.summary) > *:not(section):not(h1):not(h2):not(h3):not(h4):not(h5):not(h6):not(script):not(.groups):not(.supporter-article-promo):not(.df-promo):not(aside):not(.internal-link):not(.poll_wrapper):not(.poll_ad_container)")):document.querySelectorAll("".concat(e.inlineInto," > *:not(section):not(.review_rating):not(h1):not(h2):not(h3):not(h4):not(h5):not(h6):not(script):not(.groups):not(.supporter-article-promo):not(.df-promo):not(aside):not(.internal-link):not(.poll_wrapper):not(.poll_ad_container)"))).forEach((function(s,l,d){var c=function(t,i){if(!e.inlineBetweenTextOnly)return!0;var n=["P","OL","UL","TABLE"];return t<i.length-1&&n.includes(i[t].tagName)&&n.includes(i[t+1].tagName)}(l,d)&&function(t,i){if(!e.inlineAvoidBbwApester)return!0;if(t<i.length-1){var n=i[t],r=i[t+1],a=".blue_billywig, .apester-media, .apester-unit";return![].concat(o(n.querySelectorAll(a)),o(r.querySelectorAll(a))).length>0}return!1}(l,d);if(a+=s.offsetHeight,c)if(a>=t-i&&1===e.inlineCounter){var p=u(e.inlineCounter);e.insertAfter(p,s)}else if(2===e.inlineCounter){if(document.querySelector(".inlinead:not(.collapsible) + p")!==s){var g=u(e.inlineCounter);g&&e.insertAfter(g,s)}}else if(a>=n&&e.inlineCounter>2){var h=u(e.inlineCounter);e.insertAfter(h,s)}else if(d.length>2&&d.length===l+2&&a>=n*r||d.length>2&&d.length===l+2&&1===e.inlineCounter||d.length<=2&&d.length===l+1&&1===e.inlineCounter){var f=u(e.inlineCounter);e.insertAfter(f,s)}}))}},{key:"inlineComUnitDesktop",value:function(){var e=this,t=this.videoPlaylistConditions(),i=this.twitchConditions(),n=this.surveyConditions(!0);if(t||n){var o,r,a,s,l,d,c,u=(o="*:not(section):not(h1):not(h2):not(h3):not(h4):not(h5):not(h6):not(script):not(.groups):not(.supporter-article-promo):not(.df-promo):not(aside):not(.internal-link):not(figure.right + *):not(figure.right + * + *):not(figure.right + * + * + *):not(figure.left + *):not(figure.left + * + *):not(figure.left + * + * + *)",document.querySelectorAll("".concat(e.desktopInlineInto," > section:not(.summary)")).length>0?document.querySelectorAll("".concat(e.desktopInlineInto," > ").concat(o,", ").concat(e.desktopInlineInto," section:not(.summary) > ").concat(o)):document.querySelectorAll("".concat(e.desktopInlineInto," > ").concat(o))),p=document.createElement("div"),g=document.createElement("div");if(p.style="clear: both",g.style="clear: both",p.classList.add("commercial-slot-1"),g.classList.add("commercial-slot-2"),(s=u,l=[],d=0,c=0,s.forEach((function(e,t){var i=function(e,t){return e<t.length-1&&"P"===t[e].tagName&&"P"===t[e+1].tagName}(t,s);"P"===e.tagName&&(d+=1),i&&e.getBoundingClientRect().top+document.body.scrollTop-c>window.innerHeight&&d>2&&(c=e.getBoundingClientRect().top+document.body.scrollTop,l.push(e))})),l).forEach((function(e,t){0===t?r=e:1===t&&(a=e)})),t&&n)r&&(r.parentNode.insertBefore(p,r.nextSibling),i?p.appendChild(this.generateTwitchEmbed()):p.appendChild(this.primisPlaylistPlacementId?this.generatePrimisPlaylist():this.generatePlaylist()),this.debug&&(console.log("%cADD SLOT 1 AFTER: ","background: black; color: green; padding: 4px 8px",r),console.log("%cADDING ".concat(this.primisPlaylistPlacementId?"PRIMIS":"BBW"," PLAYLIST TO SLOT 1"),"background: black; color: green; padding: 4px 8px"))),a&&(a.parentNode.insertBefore(g,a.nextSibling),this.generateSurvey(g),this.debug&&(console.log("%cADD SLOT 2 AFTER: ","background: black; color: green; padding: 4px 8px",a),console.log("%cADDING POLL TO SLOT 2","background: black; color: green; padding: 4px 8px")));else if(t&&!n&&r)r.parentNode.insertBefore(p,r.nextSibling),i?p.appendChild(this.generateTwitchEmbed()):p.appendChild(this.primisPlaylistPlacementId?this.generatePrimisPlaylist():this.generatePlaylist()),this.debug&&(console.log("%cADD SLOT 1 AFTER: ","background: black; color: green; padding: 4px 8px",r),console.log("%cADDING ".concat(this.primisPlaylistPlacementId?"PRIMIS":"BBW"," PLAYLIST TO SLOT 1"),"background: black; color: green; padding: 4px 8px"),console.log("%cNO POLL","background: black; color: red; padding: 4px 8px"));else if(!t&&n&&r)r.parentNode.insertBefore(p,r.nextSibling),this.generateSurvey(p),this.debug&&(console.log("%cADD SLOT 1 AFTER: ","background: black; color: green; padding: 4px 8px",r),console.log("%cADDING POLL TO SLOT 1","background: black; color: green; padding: 4px 8px"),console.log("%cNO PLAYLIST","background: black; color: red; padding: 4px 8px"));else if(!r&&!a){var h=document.querySelector('.poll_wrapper[data-placeholder="true"]');if(h){var f=h.querySelector(".question");f&&this.sendToPiwik("quokkster: ".concat(f.innerText),"loaded")}this.debug&&console.log("%cNO SLOT 1/SLOT 2 ADDED","background: black; color: red; padding: 4px 8px")}}else this.debug&&console.log("%cNO COMMERCIAL INJECTION FOR DESKTOP","background: black; color: red; padding: 4px 8px")}},{key:"freshAd",value:function(e){var t=this,i={rootMargin:"0px 0px ".concat(this.lazyload_spacer,"px 0px"),threshold:0};console.log("config",i),"IntersectionObserver"in window&&(this.observer_fresh||(this.observer_fresh=new IntersectionObserver((function(e){e.forEach((function(e){if(e.intersectionRatio>0){t.observer_fresh.unobserve(e.target);var i=e.target;t.requestAd(i),i.classList.remove("freshad_lazyload"),i.classList.add("freshad_lazyloaded")}}))}),i))),null!==document.querySelector(e)&&this.observer_fresh.observe(document.querySelector(e))}},{key:"appendStickyAd",value:function(e,t){var i=document.createElement("div");i.id="sticky_leaderboard",i.classList.add("collapsible"),i.innerHTML='\n      <div class="leaderboard_inner">\n        <div class="'.concat(this.adClass,' sticky_lb"\n          data-dfp-id="').concat(e,'"\n          data-dfp-sizes="').concat(t,'"\n          data-dfp-targeting="lazyload=false,sticky=true"\n          data-dfp-responsive=""\n          data-dfp-collapse="true"\n          id="div-ga-').concat(e,'"\n        ></div>\n        </div>\n      <div id="sticky_leader_close" class="button"><span class="advert_label">').concat(this.advertHeader,'</span><span class="icon" data-icon="times" data-type="solid"></span></div>'),document.body.appendChild(i),i.querySelector("#sticky_leader_close").addEventListener("click",(function(e){i.remove()}),!1)}}],i&&l(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();GNAdScript=t}();
;(function(window){var IsAB=function(options){this._options={checkOnLoad:false,resetOnEnd:false,loopCheckTime:50,loopMaxNumber:5,baitClass:'pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links',baitStyle:'width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;',debug:false};this._var={version:'3.2.1',bait:null,checking:false,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}};if(options!==undefined){this.setOption(options);}
var self=this;var eventCallback=function(){setTimeout(function(){if(self._options.checkOnLoad===true){if(self._options.debug===true){self._log('onload->eventCallback','A check loading is launched');}
if(self._var.bait===null){self._creatBait();}
setTimeout(function(){self.check();},1);}},1);};if(window.addEventListener!==undefined){window.addEventListener('load',eventCallback,false);}else{window.attachEvent('onload',eventCallback);}};IsAB.prototype._options=null;IsAB.prototype._var=null;IsAB.prototype._bait=null;IsAB.prototype._log=function(method,message){console.log('[IsAB]['+method+'] '+message);};IsAB.prototype.setOption=function(options,value){if(value!==undefined){var key=options;options={};options[key]=value;}
for(var option in options){this._options[option]=options[option];if(this._options.debug===true){this._log('setOption','The option "'+option+'" he was assigned to "'+options[option]+'"');}}
return this;};IsAB.prototype._creatBait=function(){var bait=document.createElement('div');bait.setAttribute('class',this._options.baitClass);bait.setAttribute('style',this._options.baitStyle);this._var.bait=window.document.body.appendChild(bait);this._var.bait.offsetParent;this._var.bait.offsetHeight;this._var.bait.offsetLeft;this._var.bait.offsetTop;this._var.bait.offsetWidth;this._var.bait.clientHeight;this._var.bait.clientWidth;if(this._options.debug===true){this._log('_creatBait','Bait has been created');}};IsAB.prototype._destroyBait=function(){window.document.body.removeChild(this._var.bait);this._var.bait=null;if(this._options.debug===true){this._log('_destroyBait','Bait has been removed');}};IsAB.prototype.check=function(loop){if(loop===undefined){loop=true;}
if(this._options.debug===true){this._log('check','An audit was requested '+(loop===true?'with a':'without')+' loop');}
if(this._var.checking===true){if(this._options.debug===true){this._log('check','A check was canceled because there is already an ongoing');}
return false;}
this._var.checking=true;if(this._var.bait===null){this._creatBait();}
var self=this;this._var.loopNumber=0;if(loop===true){this._var.loop=setInterval(function(){self._checkBait(loop);},this._options.loopCheckTime);}
setTimeout(function(){self._checkBait(loop);},1);if(this._options.debug===true){this._log('check','A check is in progress ...');}
return true;};IsAB.prototype._checkBait=function(loop){var detected=false;if(this._var.bait===null){this._creatBait();}
if(window.document.body.getAttribute('abp')!==null||this._var.bait.offsetParent===null||this._var.bait.offsetHeight==0||this._var.bait.offsetLeft==0||this._var.bait.offsetTop==0||this._var.bait.offsetWidth==0||this._var.bait.clientHeight==0||this._var.bait.clientWidth==0){detected=true;}
if(window.getComputedStyle!==undefined){var baitTemp=window.getComputedStyle(this._var.bait,null);if(baitTemp&&(baitTemp.getPropertyValue('display')=='none'||baitTemp.getPropertyValue('visibility')=='hidden')){detected=true;}}
if(this._options.debug===true){this._log('_checkBait','A check ('+(this._var.loopNumber+1)+'/'+this._options.loopMaxNumber+' ~'+(1+this._var.loopNumber*this._options.loopCheckTime)+'ms) was conducted and detection is '+(detected===true?'positive':'negative'));}
if(loop===true){this._var.loopNumber++;if(this._var.loopNumber>=this._options.loopMaxNumber){this._stopLoop();}}
if(detected===true){this._stopLoop();this._destroyBait();this.emitEvent(true);if(loop===true){this._var.checking=false;}}else if(this._var.loop===null||loop===false){this._destroyBait();this.emitEvent(false);if(loop===true){this._var.checking=false;}}};IsAB.prototype._stopLoop=function(detected){clearInterval(this._var.loop);this._var.loop=null;this._var.loopNumber=0;if(this._options.debug===true){this._log('_stopLoop','A loop has been stopped');}};IsAB.prototype.emitEvent=function(detected){if(this._options.debug===true){this._log('emitEvent','An event with a '+(detected===true?'positive':'negative')+' detection was called');}
var fns=this._var.event[(detected===true?'detected':'notDetected')];for(var i in fns){if(this._options.debug===true){this._log('emitEvent','Call function '+(parseInt(i)+1)+'/'+fns.length);}
if(fns.hasOwnProperty(i)){fns[i]();}}
if(this._options.resetOnEnd===true){this.clearEvent();}
return this;};IsAB.prototype.clearEvent=function(){this._var.event.detected=[];this._var.event.notDetected=[];if(this._options.debug===true){this._log('clearEvent','The event list has been cleared');}};IsAB.prototype.on=function(detected,fn){this._var.event[(detected===true?'detected':'notDetected')].push(fn);if(this._options.debug===true){this._log('on','A type of event "'+(detected===true?'detected':'notDetected')+'" was added');}
return this;};IsAB.prototype.onDetected=function(fn){return this.on(true,fn);};IsAB.prototype.onNotDetected=function(fn){return this.on(false,fn);};window.IsAB=IsAB;if(window.isAB===undefined){window.isAB=new IsAB({checkOnLoad:true,resetOnEnd:true});}})(window);